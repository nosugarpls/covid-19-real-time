(this["webpackJsonpreact-covid-info"]=this["webpackJsonpreact-covid-info"]||[]).push([[0],[,,,,,,,,,,,,function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";n.r(t);var c=n(0),s=n(1),a=n.n(s),r=n(6),o=n.n(r),i=n(4),u=n(2),j=(n(12),function(){return fetch("/api/messages",{method:"GET"}).catch((function(){return Promise.reject({error:"network-error"})})).then((function(e){return e.ok?e.json():e.json().then((function(e){return Promise.reject(e)}))}))}),l=(n(13),function(e){var t=e.user,n=e.onLogout;return t.isLoggedIn?Object(c.jsx)("nav",{className:"logout",children:Object(c.jsx)("a",{className:"logout",href:"#logout",onClick:n,children:"Logout"})}):null}),d=(n(14),function(e){var t=e.onLogin,n=Object(s.useState)(""),a=Object(u.a)(n,2),r=a[0],o=a[1],i=Object(s.useState)(!0),j=Object(u.a)(i,2),l=j[0],d=j[1],h=Object(s.useState)(!1),f=Object(u.a)(h,2),b=f[0],m=f[1],O=Object(s.useState)(""),g=Object(u.a)(O,2),v=g[0],p=g[1];return Object(c.jsxs)("div",{className:"login-page",children:[Object(c.jsx)("h1",{children:"COVID-19 Real-Time"}),Object(c.jsx)("img",{src:"https://deadline.com/wp-content/uploads/2020/03/coronavirus-drawing-covid-19-covid-19.jpg?w=681&h=383&crop=1",alt:"pic"}),Object(c.jsx)("div",{className:"status",children:v}),Object(c.jsx)("input",{className:"type-area",placeholder:"Enter username",disabled:b,onChange:function(e){p(""),o(e.target.value),d(!e.target.value)},value:r}),Object(c.jsx)("button",{onClick:function(){m(!0),function(e){var t=e.username;return fetch("/api/session",{method:"POST",headers:new Headers({"content-type":"application/json"}),body:JSON.stringify({username:t})}).catch((function(){return Promise.reject({error:"network-error"})})).then((function(e){return e.ok?e.json():e.json().then((function(e){return Promise.reject(e)}))}))}({username:r}).then((function(e){t({username:e}),p(""),m(!1)})).catch((function(e){p("Username Invalid"),m(!1)}))},disabled:l||b,children:b?"...":"Login"}),Object(c.jsx)("p",{className:"instructions",children:"Username should contain alphanumeric characters only."}),Object(c.jsx)("p",{className:"instructions",children:"Username could not be dog."})]})});n(15);var h=function(e){var t=e.countries,n=e.onClick;return Object(c.jsxs)("div",{children:[Object(c.jsx)("h4",{children:"Scroll & Click"}),Object(c.jsx)("ol",{className:"menu",onClick:n,children:t.map((function(e){return Object(c.jsx)("li",{className:"choice","data-name":e.name,children:e.name})}))})]})};n(16),n(17);var f=function(e){var t=e.title,n=e.cases,s=e.total;return Object(c.jsxs)("div",{className:"box",children:[Object(c.jsxs)("p",{children:[" ",t," "]}),Object(c.jsxs)("h3",{children:[s," Total"]}),Object(c.jsx)("p",{className:"case",children:n})]})},b=n(3),m=n.n(b),O=function(e){return e?"+ ".concat(m()(e).format("0.0a")):"+ 0"};var g=function(e){var t=e.countryInfo;return Object(c.jsxs)("div",{className:"container",children:[Object(c.jsx)(f,{title:"Coronavirus Cases",cases:O(t.todayCases),total:m()(t.cases).format("0.0a")}),Object(c.jsx)(f,{title:"Recovered Cases",cases:O(t.todayRecovered),total:m()(t.recovered).format("0.0a")}),Object(c.jsx)(f,{title:"Death Cases",cases:O(t.todayDeaths),total:m()(t.deaths).format("0.0a")})]})};n(18);var v=function(){var e=new Date,t=e.getDate(),n=e.getMonth()+1,s=e.getFullYear();return Object(c.jsxs)("h1",{children:["COVID-19 Real-Time ",s,".",n,".",t]})};n(19);var p=function(){var e=(new Date).getFullYear();return Object(c.jsx)("footer",{className:"foot",children:Object(c.jsxs)("p",{className:"foot",children:["Copyright \u24d2 ",e]})})};n(20);var x=function(e){var t=e.messages;return Object(c.jsx)("ol",{className:"messages",children:t.map((function(e){return Object(c.jsxs)("li",{children:[Object(c.jsxs)("div",{className:"stamp",children:[Object(c.jsx)("span",{className:"sender",children:e.sender}),Object(c.jsx)("span",{className:"timestamp",children:e.timestamp})]}),Object(c.jsx)("div",{className:"message",children:e.text})]})}))})},N=function(e){var t=e.onUpdate,n=Object(s.useState)(""),a=Object(u.a)(n,2),r=a[0],o=a[1],i=Object(s.useState)(!0),j=Object(u.a)(i,2),l=j[0],d=j[1],h=Object(s.useState)(!1),f=Object(u.a)(h,2),b=f[0],m=f[1];return Object(c.jsxs)("div",{children:[Object(c.jsx)("input",{className:"type-area",placeholder:"Type message",disabled:b,onChange:function(e){o(e.target.value),d(!e.target.value)},value:r}),Object(c.jsx)("button",{onClick:function(){r&&(m(!0),fetch("/api/messages",{method:"POST",headers:new Headers({"content-type":"application/json"}),body:JSON.stringify({text:r})}).catch((function(){return Promise.reject({error:"network-error"})})).then((function(e){return e.ok?e.json():e.json().then((function(e){return Promise.reject(e)}))})).then((function(e){t(),m(!1),o("")})).catch((function(e){t(),m(!1),o("")})))},disabled:l||b,children:b?"...":"Send"})]})},y=function(e){var t=e.messages,n=e.onUpdate;return Object(c.jsxs)("div",{className:"chat-app",children:[Object(c.jsx)(x,{className:"display-panel",messages:t}),Object(c.jsx)(N,{className:"outgoing-panel",onUpdate:n})]})};var P=function(){var e=Object(s.useState)({isLoggedIn:!1,isPending:!0}),t=Object(u.a)(e,2),n=t[0],a=t[1],r=Object(s.useState)("all"),o=Object(u.a)(r,2),f=o[0],b=o[1],m=Object(s.useState)({}),O=Object(u.a)(m,2),x=O[0],N=O[1],P=Object(s.useState)([]),C=Object(u.a)(P,2),S=C[0],k=C[1],L=Object(s.useState)([]),w=Object(u.a)(L,2),I=w[0],T=w[1];Object(s.useEffect)((function(){fetch("/api/session",{method:"GET"}).catch((function(){return Promise.reject({error:"network-error"})})).then((function(e){return e.ok?e.json():e.json().then((function(e){return Promise.reject(e)}))})).then((function(e){a({isLoggedIn:!0,isPending:!1,username:e}),E({country:f})})).catch((function(){a({isLoggedIn:!1,isPending:!1})}))}),[f]);var D,E=function(e){var t=e.country,n="all"===t?"https://disease.sh/v3/covid-19/all":"https://disease.sh/v3/covid-19/countries/".concat(t);fetch(n).then((function(e){return e.json()})).then((function(e){N(e)})).catch((function(){N({})})),fetch("https://disease.sh/v3/covid-19/countries").then((function(e){return e.json()})).then((function(e){var t=e.map((function(e){return{name:e.country}}));k(t)})).catch((function(){k([])})),j().then((function(e){T(e)})).catch((function(){T([])}))};return n.isPending?Object(c.jsx)("div",{children:"Loading..."}):(D=n.isLoggedIn?Object(c.jsxs)("div",{className:"app",children:[Object(c.jsxs)("div",{className:"top-container",children:[Object(c.jsxs)("div",{className:"left-container",children:[Object(c.jsx)(v,{}),Object(c.jsx)(h,{countries:S,onClick:function(e){var t=e.target.dataset.name;b(t)}}),Object(c.jsx)(g,{countryInfo:x})]}),Object(c.jsx)("div",{className:"right-container",children:Object(c.jsx)(y,{messages:I,onUpdate:function e(){j().then((function(e){T(e)})).catch((function(){T([])})).then(setTimeout(e,1e3))}})})]}),Object(c.jsx)(l,{user:n,onLogout:function(){a(Object(i.a)(Object(i.a)({},n),{},{isPending:!0})),fetch("/api/session",{method:"DELETE"}).catch((function(){return Promise.reject({error:"network-error"})})).then((function(e){return e.ok?e.json():e.json().then((function(e){return Promise.reject(e)}))})).then((function(){a({isLoggedIn:!1,isPending:!1})})).catch((function(){a(Object(i.a)(Object(i.a)({},n),{},{isPending:!1}))}))}}),Object(c.jsx)(p,{})]}):Object(c.jsx)(d,{onLogin:function(e){var t=e.username;a({isLoggedIn:!0,isPending:!1,username:t}),E({country:f})}}),Object(c.jsx)("div",{children:D}))},C=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,22)).then((function(t){var n=t.getCLS,c=t.getFID,s=t.getFCP,a=t.getLCP,r=t.getTTFB;n(e),c(e),s(e),a(e),r(e)}))};o.a.render(Object(c.jsx)(a.a.StrictMode,{children:Object(c.jsx)(P,{})}),document.getElementById("root")),C()}],[[21,1,2]]]);
//# sourceMappingURL=main.9fea9fe1.chunk.js.map